<center > 北京师范大学2018-2019学年第一学期 “汇编程序设计” </center>

<center><font size=8><b>上机作业六</b></fontfont></center>



| 姓    名 |   学    号   | 日    期  |
| :------: | :----------: | :-------: |
|   刘源   | 201611210134 | 2018.11.1 |



## 实验目的

* **div 除法指令的应用。**
* **基于dx、sp、si、di 寄存器和立即数的七种寻址方式访问内容中的结构化数据。**


##  实验总结：

在实验过程中需要存储年份（4字节）、收入（4字节）、雇员数（2字节）、人均收入（2字节），所以最开始写程序时，分开写了4个大循环，但实际上年份和收入都是4字节，都可以用bx做转移指针，同样雇员数和人均收人都可以用si做转移指针。这样可以大大减少冗余代码和运行时间。

### 第 1 题

![1541073012060](C:\Users\Dell\AppData\Roaming\Typora\typora-user-images\1541073012060.png)

```assembly
assume cs:codesg
data segment
	db '1975','1976','1977','1978','1979','1980','1981','1982','1983'
	db '1984','1985','1986','1987','1988','1989','1990','1991','1992'
	db '1993','1994','1995'

	dd 16,22,382,1356,2390,8000,16000,24486,50065,97479,140417,197514
	dd 345980,590827,803530,1183000,1843000,2759000,3753000,4649000,5973000

	dw 3,7,9,13,28,38,130,220,476,778,1001,1442,2258,2793,4037,5635,8226
	dw 11542,14430,15257,17800
data ends

table segment
	db 21 dup ('year summ ne ?? ')
table ends

codesg segment  
	start:
		mov ax,data
		mov ds,ax
		mov ax,table
		mov es,ax

		mov bx,0	;年份、收入的偏移
		mov si,0	;雇员数、人均收入的偏移
		mov di,0	;1年的偏移
		mov cx,21

		s:
			;存入年份
			mov ax,ds:[bx]
			mov es:[di],ax
			mov ax,ds:[bx+2]
			mov es:[di+2],ax
			;存入收入
			mov ax,ds:[bx + 84]
			mov es:[di + 5],ax
			mov ax,ds:[bx + 86]
			mov es:[di + 7],ax
			;存入雇员数
			mov ax,ds:[si + 168]	
			mov es:[di + 10],ax
			;存入年均收入
			mov dx,es:[di + 7]
			mov ax,es:[di + 5]
			div word ptr es:[di + 10]
			mov es:[di + 13],ax
			;循环条件
			add bx,4
			add si,2
			add di,16
		loop s

		mov ax,4c00H
		int 21H
	codesg ends
end start
```

 查看data段中的数据存储：

![1541075893704](C:\Users\Dell\AppData\Roaming\Typora\typora-user-images\1541075893704.png)

程序运行结束后，table段中的数据存储：（前8条数据）

![1541076095005](C:\Users\Dell\AppData\Roaming\Typora\typora-user-images\1541076095005.png)